{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport * as React from 'react';\nimport usePatchElement from '../../_util/hooks/usePatchElement';\nimport { withConfirm, withError, withInfo, withSuccess, withWarn } from '../confirm';\nimport HookModal from './HookModal';\nimport destroyFns from '../destroyFns';\nlet uuid = 0;\nconst ElementsHolder = /*#__PURE__*/React.memo( /*#__PURE__*/React.forwardRef((_props, ref) => {\n  const [elements, patchElement] = usePatchElement();\n  React.useImperativeHandle(ref, () => ({\n    patchElement\n  }), []); // eslint-disable-next-line react/jsx-no-useless-fragment\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, elements);\n}));\n\nfunction useModal() {\n  const holderRef = React.useRef(null); // ========================== Effect ==========================\n\n  const [actionQueue, setActionQueue] = React.useState([]);\n  React.useEffect(() => {\n    if (actionQueue.length) {\n      const cloneQueue = _toConsumableArray(actionQueue);\n\n      cloneQueue.forEach(action => {\n        action();\n      });\n      setActionQueue([]);\n    }\n  }, [actionQueue]); // =========================== Hook ===========================\n\n  const getConfirmFunc = React.useCallback(withFunc => function hookConfirm(config) {\n    var _a;\n\n    uuid += 1;\n    const modalRef = /*#__PURE__*/React.createRef();\n    let closeFunc;\n    const modal = /*#__PURE__*/React.createElement(HookModal, {\n      key: `modal-${uuid}`,\n      config: withFunc(config),\n      ref: modalRef,\n      afterClose: () => {\n        closeFunc === null || closeFunc === void 0 ? void 0 : closeFunc();\n      }\n    });\n    closeFunc = (_a = holderRef.current) === null || _a === void 0 ? void 0 : _a.patchElement(modal);\n\n    if (closeFunc) {\n      destroyFns.push(closeFunc);\n    }\n\n    return {\n      destroy: () => {\n        function destroyAction() {\n          var _a;\n\n          (_a = modalRef.current) === null || _a === void 0 ? void 0 : _a.destroy();\n        }\n\n        if (modalRef.current) {\n          destroyAction();\n        } else {\n          setActionQueue(prev => [].concat(_toConsumableArray(prev), [destroyAction]));\n        }\n      },\n      update: newConfig => {\n        function updateAction() {\n          var _a;\n\n          (_a = modalRef.current) === null || _a === void 0 ? void 0 : _a.update(newConfig);\n        }\n\n        if (modalRef.current) {\n          updateAction();\n        } else {\n          setActionQueue(prev => [].concat(_toConsumableArray(prev), [updateAction]));\n        }\n      }\n    };\n  }, []);\n  const fns = React.useMemo(() => ({\n    info: getConfirmFunc(withInfo),\n    success: getConfirmFunc(withSuccess),\n    error: getConfirmFunc(withError),\n    warning: getConfirmFunc(withWarn),\n    confirm: getConfirmFunc(withConfirm)\n  }), []);\n  return [fns, /*#__PURE__*/React.createElement(ElementsHolder, {\n    key: \"modal-holder\",\n    ref: holderRef\n  })];\n}\n\nexport default useModal;","map":{"version":3,"names":["_toConsumableArray","React","usePatchElement","withConfirm","withError","withInfo","withSuccess","withWarn","HookModal","destroyFns","uuid","ElementsHolder","memo","forwardRef","_props","ref","elements","patchElement","useImperativeHandle","createElement","Fragment","useModal","holderRef","useRef","actionQueue","setActionQueue","useState","useEffect","length","cloneQueue","forEach","action","getConfirmFunc","useCallback","withFunc","hookConfirm","config","_a","modalRef","createRef","closeFunc","modal","key","afterClose","current","push","destroy","destroyAction","prev","concat","update","newConfig","updateAction","fns","useMemo","info","success","error","warning","confirm"],"sources":["D:/year4sem2/evmos/campaign/node_modules/antd/es/modal/useModal/index.js"],"sourcesContent":["import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport * as React from 'react';\nimport usePatchElement from '../../_util/hooks/usePatchElement';\nimport { withConfirm, withError, withInfo, withSuccess, withWarn } from '../confirm';\nimport HookModal from './HookModal';\nimport destroyFns from '../destroyFns';\nlet uuid = 0;\nconst ElementsHolder = /*#__PURE__*/React.memo( /*#__PURE__*/React.forwardRef((_props, ref) => {\n  const [elements, patchElement] = usePatchElement();\n  React.useImperativeHandle(ref, () => ({\n    patchElement\n  }), []);\n  // eslint-disable-next-line react/jsx-no-useless-fragment\n  return /*#__PURE__*/React.createElement(React.Fragment, null, elements);\n}));\nfunction useModal() {\n  const holderRef = React.useRef(null);\n  // ========================== Effect ==========================\n  const [actionQueue, setActionQueue] = React.useState([]);\n  React.useEffect(() => {\n    if (actionQueue.length) {\n      const cloneQueue = _toConsumableArray(actionQueue);\n      cloneQueue.forEach(action => {\n        action();\n      });\n      setActionQueue([]);\n    }\n  }, [actionQueue]);\n  // =========================== Hook ===========================\n  const getConfirmFunc = React.useCallback(withFunc => function hookConfirm(config) {\n    var _a;\n    uuid += 1;\n    const modalRef = /*#__PURE__*/React.createRef();\n    let closeFunc;\n    const modal = /*#__PURE__*/React.createElement(HookModal, {\n      key: `modal-${uuid}`,\n      config: withFunc(config),\n      ref: modalRef,\n      afterClose: () => {\n        closeFunc === null || closeFunc === void 0 ? void 0 : closeFunc();\n      }\n    });\n    closeFunc = (_a = holderRef.current) === null || _a === void 0 ? void 0 : _a.patchElement(modal);\n    if (closeFunc) {\n      destroyFns.push(closeFunc);\n    }\n    return {\n      destroy: () => {\n        function destroyAction() {\n          var _a;\n          (_a = modalRef.current) === null || _a === void 0 ? void 0 : _a.destroy();\n        }\n        if (modalRef.current) {\n          destroyAction();\n        } else {\n          setActionQueue(prev => [].concat(_toConsumableArray(prev), [destroyAction]));\n        }\n      },\n      update: newConfig => {\n        function updateAction() {\n          var _a;\n          (_a = modalRef.current) === null || _a === void 0 ? void 0 : _a.update(newConfig);\n        }\n        if (modalRef.current) {\n          updateAction();\n        } else {\n          setActionQueue(prev => [].concat(_toConsumableArray(prev), [updateAction]));\n        }\n      }\n    };\n  }, []);\n  const fns = React.useMemo(() => ({\n    info: getConfirmFunc(withInfo),\n    success: getConfirmFunc(withSuccess),\n    error: getConfirmFunc(withError),\n    warning: getConfirmFunc(withWarn),\n    confirm: getConfirmFunc(withConfirm)\n  }), []);\n  return [fns, /*#__PURE__*/React.createElement(ElementsHolder, {\n    key: \"modal-holder\",\n    ref: holderRef\n  })];\n}\nexport default useModal;"],"mappings":"AAAA,OAAOA,kBAAP,MAA+B,8CAA/B;AACA,OAAO,KAAKC,KAAZ,MAAuB,OAAvB;AACA,OAAOC,eAAP,MAA4B,mCAA5B;AACA,SAASC,WAAT,EAAsBC,SAAtB,EAAiCC,QAAjC,EAA2CC,WAA3C,EAAwDC,QAAxD,QAAwE,YAAxE;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,UAAP,MAAuB,eAAvB;AACA,IAAIC,IAAI,GAAG,CAAX;AACA,MAAMC,cAAc,GAAG,aAAaV,KAAK,CAACW,IAAN,EAAY,aAAaX,KAAK,CAACY,UAAN,CAAiB,CAACC,MAAD,EAASC,GAAT,KAAiB;EAC7F,MAAM,CAACC,QAAD,EAAWC,YAAX,IAA2Bf,eAAe,EAAhD;EACAD,KAAK,CAACiB,mBAAN,CAA0BH,GAA1B,EAA+B,OAAO;IACpCE;EADoC,CAAP,CAA/B,EAEI,EAFJ,EAF6F,CAK7F;;EACA,OAAO,aAAahB,KAAK,CAACkB,aAAN,CAAoBlB,KAAK,CAACmB,QAA1B,EAAoC,IAApC,EAA0CJ,QAA1C,CAApB;AACD,CAP4D,CAAzB,CAApC;;AAQA,SAASK,QAAT,GAAoB;EAClB,MAAMC,SAAS,GAAGrB,KAAK,CAACsB,MAAN,CAAa,IAAb,CAAlB,CADkB,CAElB;;EACA,MAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCxB,KAAK,CAACyB,QAAN,CAAe,EAAf,CAAtC;EACAzB,KAAK,CAAC0B,SAAN,CAAgB,MAAM;IACpB,IAAIH,WAAW,CAACI,MAAhB,EAAwB;MACtB,MAAMC,UAAU,GAAG7B,kBAAkB,CAACwB,WAAD,CAArC;;MACAK,UAAU,CAACC,OAAX,CAAmBC,MAAM,IAAI;QAC3BA,MAAM;MACP,CAFD;MAGAN,cAAc,CAAC,EAAD,CAAd;IACD;EACF,CARD,EAQG,CAACD,WAAD,CARH,EAJkB,CAalB;;EACA,MAAMQ,cAAc,GAAG/B,KAAK,CAACgC,WAAN,CAAkBC,QAAQ,IAAI,SAASC,WAAT,CAAqBC,MAArB,EAA6B;IAChF,IAAIC,EAAJ;;IACA3B,IAAI,IAAI,CAAR;IACA,MAAM4B,QAAQ,GAAG,aAAarC,KAAK,CAACsC,SAAN,EAA9B;IACA,IAAIC,SAAJ;IACA,MAAMC,KAAK,GAAG,aAAaxC,KAAK,CAACkB,aAAN,CAAoBX,SAApB,EAA+B;MACxDkC,GAAG,EAAG,SAAQhC,IAAK,EADqC;MAExD0B,MAAM,EAAEF,QAAQ,CAACE,MAAD,CAFwC;MAGxDrB,GAAG,EAAEuB,QAHmD;MAIxDK,UAAU,EAAE,MAAM;QAChBH,SAAS,KAAK,IAAd,IAAsBA,SAAS,KAAK,KAAK,CAAzC,GAA6C,KAAK,CAAlD,GAAsDA,SAAS,EAA/D;MACD;IANuD,CAA/B,CAA3B;IAQAA,SAAS,GAAG,CAACH,EAAE,GAAGf,SAAS,CAACsB,OAAhB,MAA6B,IAA7B,IAAqCP,EAAE,KAAK,KAAK,CAAjD,GAAqD,KAAK,CAA1D,GAA8DA,EAAE,CAACpB,YAAH,CAAgBwB,KAAhB,CAA1E;;IACA,IAAID,SAAJ,EAAe;MACb/B,UAAU,CAACoC,IAAX,CAAgBL,SAAhB;IACD;;IACD,OAAO;MACLM,OAAO,EAAE,MAAM;QACb,SAASC,aAAT,GAAyB;UACvB,IAAIV,EAAJ;;UACA,CAACA,EAAE,GAAGC,QAAQ,CAACM,OAAf,MAA4B,IAA5B,IAAoCP,EAAE,KAAK,KAAK,CAAhD,GAAoD,KAAK,CAAzD,GAA6DA,EAAE,CAACS,OAAH,EAA7D;QACD;;QACD,IAAIR,QAAQ,CAACM,OAAb,EAAsB;UACpBG,aAAa;QACd,CAFD,MAEO;UACLtB,cAAc,CAACuB,IAAI,IAAI,GAAGC,MAAH,CAAUjD,kBAAkB,CAACgD,IAAD,CAA5B,EAAoC,CAACD,aAAD,CAApC,CAAT,CAAd;QACD;MACF,CAXI;MAYLG,MAAM,EAAEC,SAAS,IAAI;QACnB,SAASC,YAAT,GAAwB;UACtB,IAAIf,EAAJ;;UACA,CAACA,EAAE,GAAGC,QAAQ,CAACM,OAAf,MAA4B,IAA5B,IAAoCP,EAAE,KAAK,KAAK,CAAhD,GAAoD,KAAK,CAAzD,GAA6DA,EAAE,CAACa,MAAH,CAAUC,SAAV,CAA7D;QACD;;QACD,IAAIb,QAAQ,CAACM,OAAb,EAAsB;UACpBQ,YAAY;QACb,CAFD,MAEO;UACL3B,cAAc,CAACuB,IAAI,IAAI,GAAGC,MAAH,CAAUjD,kBAAkB,CAACgD,IAAD,CAA5B,EAAoC,CAACI,YAAD,CAApC,CAAT,CAAd;QACD;MACF;IAtBI,CAAP;EAwBD,CAzCsB,EAyCpB,EAzCoB,CAAvB;EA0CA,MAAMC,GAAG,GAAGpD,KAAK,CAACqD,OAAN,CAAc,OAAO;IAC/BC,IAAI,EAAEvB,cAAc,CAAC3B,QAAD,CADW;IAE/BmD,OAAO,EAAExB,cAAc,CAAC1B,WAAD,CAFQ;IAG/BmD,KAAK,EAAEzB,cAAc,CAAC5B,SAAD,CAHU;IAI/BsD,OAAO,EAAE1B,cAAc,CAACzB,QAAD,CAJQ;IAK/BoD,OAAO,EAAE3B,cAAc,CAAC7B,WAAD;EALQ,CAAP,CAAd,EAMR,EANQ,CAAZ;EAOA,OAAO,CAACkD,GAAD,EAAM,aAAapD,KAAK,CAACkB,aAAN,CAAoBR,cAApB,EAAoC;IAC5D+B,GAAG,EAAE,cADuD;IAE5D3B,GAAG,EAAEO;EAFuD,CAApC,CAAnB,CAAP;AAID;;AACD,eAAeD,QAAf"},"metadata":{},"sourceType":"module"}