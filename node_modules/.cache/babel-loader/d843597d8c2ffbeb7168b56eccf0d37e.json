{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport useEvent from \"./useEvent\";\nimport { useLayoutUpdateEffect } from \"./useLayoutEffect\";\nimport useState from \"./useState\";\n/** We only think `undefined` is empty */\n\nfunction hasValue(value) {\n  return value !== undefined;\n}\n/**\n * Similar to `useState` but will use props value if provided.\n * Note that internal use rc-util `useState` hook.\n */\n\n\nexport default function useMergedState(defaultStateValue, option) {\n  var _ref = option || {},\n      defaultValue = _ref.defaultValue,\n      value = _ref.value,\n      onChange = _ref.onChange,\n      postState = _ref.postState; // ======================= Init =======================\n\n\n  var _useState = useState(function () {\n    if (hasValue(value)) {\n      return value;\n    } else if (hasValue(defaultValue)) {\n      return typeof defaultValue === 'function' ? defaultValue() : defaultValue;\n    } else {\n      return typeof defaultStateValue === 'function' ? defaultStateValue() : defaultStateValue;\n    }\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      innerValue = _useState2[0],\n      setInnerValue = _useState2[1];\n\n  var mergedValue = value !== undefined ? value : innerValue;\n  var postMergedValue = postState ? postState(mergedValue) : mergedValue; // ====================== Change ======================\n\n  var onChangeFn = useEvent(onChange);\n\n  var _useState3 = useState([mergedValue]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      prevValue = _useState4[0],\n      setPrevValue = _useState4[1];\n\n  useLayoutUpdateEffect(function () {\n    var prev = prevValue[0];\n\n    if (innerValue !== prev) {\n      onChangeFn(innerValue, prev);\n    }\n  }, [prevValue]); // Sync value back to `undefined` when it from control to un-control\n\n  useLayoutUpdateEffect(function () {\n    if (!hasValue(value)) {\n      setInnerValue(value);\n    }\n  }, [value]); // ====================== Update ======================\n\n  var triggerChange = useEvent(function (updater, ignoreDestroy) {\n    setInnerValue(updater, ignoreDestroy);\n    setPrevValue([mergedValue], ignoreDestroy);\n  });\n  return [postMergedValue, triggerChange];\n}","map":{"version":3,"names":["_slicedToArray","useEvent","useLayoutUpdateEffect","useState","hasValue","value","undefined","useMergedState","defaultStateValue","option","_ref","defaultValue","onChange","postState","_useState","_useState2","innerValue","setInnerValue","mergedValue","postMergedValue","onChangeFn","_useState3","_useState4","prevValue","setPrevValue","prev","triggerChange","updater","ignoreDestroy"],"sources":["D:/year4sem2/evmos/campaign/node_modules/rc-picker/node_modules/rc-util/es/hooks/useMergedState.js"],"sourcesContent":["import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport useEvent from \"./useEvent\";\nimport { useLayoutUpdateEffect } from \"./useLayoutEffect\";\nimport useState from \"./useState\";\n/** We only think `undefined` is empty */\nfunction hasValue(value) {\n  return value !== undefined;\n}\n\n/**\n * Similar to `useState` but will use props value if provided.\n * Note that internal use rc-util `useState` hook.\n */\nexport default function useMergedState(defaultStateValue, option) {\n  var _ref = option || {},\n    defaultValue = _ref.defaultValue,\n    value = _ref.value,\n    onChange = _ref.onChange,\n    postState = _ref.postState;\n\n  // ======================= Init =======================\n  var _useState = useState(function () {\n      if (hasValue(value)) {\n        return value;\n      } else if (hasValue(defaultValue)) {\n        return typeof defaultValue === 'function' ? defaultValue() : defaultValue;\n      } else {\n        return typeof defaultStateValue === 'function' ? defaultStateValue() : defaultStateValue;\n      }\n    }),\n    _useState2 = _slicedToArray(_useState, 2),\n    innerValue = _useState2[0],\n    setInnerValue = _useState2[1];\n  var mergedValue = value !== undefined ? value : innerValue;\n  var postMergedValue = postState ? postState(mergedValue) : mergedValue;\n\n  // ====================== Change ======================\n  var onChangeFn = useEvent(onChange);\n  var _useState3 = useState([mergedValue]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    prevValue = _useState4[0],\n    setPrevValue = _useState4[1];\n  useLayoutUpdateEffect(function () {\n    var prev = prevValue[0];\n    if (innerValue !== prev) {\n      onChangeFn(innerValue, prev);\n    }\n  }, [prevValue]);\n\n  // Sync value back to `undefined` when it from control to un-control\n  useLayoutUpdateEffect(function () {\n    if (!hasValue(value)) {\n      setInnerValue(value);\n    }\n  }, [value]);\n\n  // ====================== Update ======================\n  var triggerChange = useEvent(function (updater, ignoreDestroy) {\n    setInnerValue(updater, ignoreDestroy);\n    setPrevValue([mergedValue], ignoreDestroy);\n  });\n  return [postMergedValue, triggerChange];\n}"],"mappings":"AAAA,OAAOA,cAAP,MAA2B,0CAA3B;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,SAASC,qBAAT,QAAsC,mBAAtC;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA;;AACA,SAASC,QAAT,CAAkBC,KAAlB,EAAyB;EACvB,OAAOA,KAAK,KAAKC,SAAjB;AACD;AAED;AACA;AACA;AACA;;;AACA,eAAe,SAASC,cAAT,CAAwBC,iBAAxB,EAA2CC,MAA3C,EAAmD;EAChE,IAAIC,IAAI,GAAGD,MAAM,IAAI,EAArB;EAAA,IACEE,YAAY,GAAGD,IAAI,CAACC,YADtB;EAAA,IAEEN,KAAK,GAAGK,IAAI,CAACL,KAFf;EAAA,IAGEO,QAAQ,GAAGF,IAAI,CAACE,QAHlB;EAAA,IAIEC,SAAS,GAAGH,IAAI,CAACG,SAJnB,CADgE,CAOhE;;;EACA,IAAIC,SAAS,GAAGX,QAAQ,CAAC,YAAY;IACjC,IAAIC,QAAQ,CAACC,KAAD,CAAZ,EAAqB;MACnB,OAAOA,KAAP;IACD,CAFD,MAEO,IAAID,QAAQ,CAACO,YAAD,CAAZ,EAA4B;MACjC,OAAO,OAAOA,YAAP,KAAwB,UAAxB,GAAqCA,YAAY,EAAjD,GAAsDA,YAA7D;IACD,CAFM,MAEA;MACL,OAAO,OAAOH,iBAAP,KAA6B,UAA7B,GAA0CA,iBAAiB,EAA3D,GAAgEA,iBAAvE;IACD;EACF,CARqB,CAAxB;EAAA,IASEO,UAAU,GAAGf,cAAc,CAACc,SAAD,EAAY,CAAZ,CAT7B;EAAA,IAUEE,UAAU,GAAGD,UAAU,CAAC,CAAD,CAVzB;EAAA,IAWEE,aAAa,GAAGF,UAAU,CAAC,CAAD,CAX5B;;EAYA,IAAIG,WAAW,GAAGb,KAAK,KAAKC,SAAV,GAAsBD,KAAtB,GAA8BW,UAAhD;EACA,IAAIG,eAAe,GAAGN,SAAS,GAAGA,SAAS,CAACK,WAAD,CAAZ,GAA4BA,WAA3D,CArBgE,CAuBhE;;EACA,IAAIE,UAAU,GAAGnB,QAAQ,CAACW,QAAD,CAAzB;;EACA,IAAIS,UAAU,GAAGlB,QAAQ,CAAC,CAACe,WAAD,CAAD,CAAzB;EAAA,IACEI,UAAU,GAAGtB,cAAc,CAACqB,UAAD,EAAa,CAAb,CAD7B;EAAA,IAEEE,SAAS,GAAGD,UAAU,CAAC,CAAD,CAFxB;EAAA,IAGEE,YAAY,GAAGF,UAAU,CAAC,CAAD,CAH3B;;EAIApB,qBAAqB,CAAC,YAAY;IAChC,IAAIuB,IAAI,GAAGF,SAAS,CAAC,CAAD,CAApB;;IACA,IAAIP,UAAU,KAAKS,IAAnB,EAAyB;MACvBL,UAAU,CAACJ,UAAD,EAAaS,IAAb,CAAV;IACD;EACF,CALoB,EAKlB,CAACF,SAAD,CALkB,CAArB,CA7BgE,CAoChE;;EACArB,qBAAqB,CAAC,YAAY;IAChC,IAAI,CAACE,QAAQ,CAACC,KAAD,CAAb,EAAsB;MACpBY,aAAa,CAACZ,KAAD,CAAb;IACD;EACF,CAJoB,EAIlB,CAACA,KAAD,CAJkB,CAArB,CArCgE,CA2ChE;;EACA,IAAIqB,aAAa,GAAGzB,QAAQ,CAAC,UAAU0B,OAAV,EAAmBC,aAAnB,EAAkC;IAC7DX,aAAa,CAACU,OAAD,EAAUC,aAAV,CAAb;IACAJ,YAAY,CAAC,CAACN,WAAD,CAAD,EAAgBU,aAAhB,CAAZ;EACD,CAH2B,CAA5B;EAIA,OAAO,CAACT,eAAD,EAAkBO,aAAlB,CAAP;AACD"},"metadata":{},"sourceType":"module"}