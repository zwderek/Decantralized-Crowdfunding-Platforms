{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"prefixCls\", \"className\", \"style\", \"prefix\", \"split\", \"notFoundContent\", \"value\", \"defaultValue\", \"children\", \"options\", \"open\", \"validateSearch\", \"filterOption\", \"onChange\", \"onKeyDown\", \"onKeyUp\", \"onPressEnter\", \"onSearch\", \"onSelect\", \"onFocus\", \"onBlur\", \"transitionName\", \"placement\", \"direction\", \"getPopupContainer\", \"dropdownClassName\", \"rows\"],\n    _excluded2 = [\"suffix\", \"prefixCls\", \"classes\", \"value\"];\nimport classNames from 'classnames';\nimport { BaseInput } from 'rc-input';\nimport TextArea from 'rc-textarea';\nimport toArray from \"rc-util/es/Children/toArray\";\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport warning from \"rc-util/es/warning\";\nimport React, { forwardRef, useEffect, useRef, useState } from 'react';\nimport useEffectState from \"./hooks/useEffectState\";\nimport KeywordTrigger from \"./KeywordTrigger\";\nimport MentionsContext from \"./MentionsContext\";\nimport Option from \"./Option\";\nimport { filterOption as defaultFilterOption, getBeforeSelectionText, getLastMeasureIndex, replaceWithMeasure, setInputSelection, validateSearch as defaultValidateSearch } from \"./util\";\nvar InternalMentions = /*#__PURE__*/forwardRef(function (props, ref) {\n  var _props$prefixCls = props.prefixCls,\n      prefixCls = _props$prefixCls === void 0 ? 'rc-mentions' : _props$prefixCls,\n      className = props.className,\n      style = props.style,\n      _props$prefix = props.prefix,\n      prefix = _props$prefix === void 0 ? '@' : _props$prefix,\n      _props$split = props.split,\n      split = _props$split === void 0 ? ' ' : _props$split,\n      _props$notFoundConten = props.notFoundContent,\n      notFoundContent = _props$notFoundConten === void 0 ? 'Not Found' : _props$notFoundConten,\n      value = props.value,\n      defaultValue = props.defaultValue,\n      children = props.children,\n      options = props.options,\n      open = props.open,\n      _props$validateSearch = props.validateSearch,\n      validateSearch = _props$validateSearch === void 0 ? defaultValidateSearch : _props$validateSearch,\n      _props$filterOption = props.filterOption,\n      filterOption = _props$filterOption === void 0 ? defaultFilterOption : _props$filterOption,\n      onChange = props.onChange,\n      onKeyDown = props.onKeyDown,\n      onKeyUp = props.onKeyUp,\n      onPressEnter = props.onPressEnter,\n      onSearch = props.onSearch,\n      onSelect = props.onSelect,\n      onFocus = props.onFocus,\n      onBlur = props.onBlur,\n      transitionName = props.transitionName,\n      placement = props.placement,\n      direction = props.direction,\n      getPopupContainer = props.getPopupContainer,\n      dropdownClassName = props.dropdownClassName,\n      _props$rows = props.rows,\n      rows = _props$rows === void 0 ? 1 : _props$rows,\n      restProps = _objectWithoutProperties(props, _excluded);\n\n  var mergedPrefix = Array.isArray(prefix) ? prefix : [prefix]; // =============================== Refs ===============================\n\n  var textareaRef = useRef(null);\n  var measureRef = useRef(null);\n\n  var getTextArea = function getTextArea() {\n    var _textareaRef$current, _textareaRef$current$;\n\n    return (_textareaRef$current = textareaRef.current) === null || _textareaRef$current === void 0 ? void 0 : (_textareaRef$current$ = _textareaRef$current.resizableTextArea) === null || _textareaRef$current$ === void 0 ? void 0 : _textareaRef$current$.textArea;\n  };\n\n  React.useImperativeHandle(ref, function () {\n    var _textareaRef$current4, _textareaRef$current5;\n\n    return {\n      focus: function focus() {\n        var _textareaRef$current2;\n\n        return (_textareaRef$current2 = textareaRef.current) === null || _textareaRef$current2 === void 0 ? void 0 : _textareaRef$current2.focus();\n      },\n      blur: function blur() {\n        var _textareaRef$current3;\n\n        return (_textareaRef$current3 = textareaRef.current) === null || _textareaRef$current3 === void 0 ? void 0 : _textareaRef$current3.blur();\n      },\n      textarea: (_textareaRef$current4 = textareaRef.current) === null || _textareaRef$current4 === void 0 ? void 0 : (_textareaRef$current5 = _textareaRef$current4.resizableTextArea) === null || _textareaRef$current5 === void 0 ? void 0 : _textareaRef$current5.textArea\n    };\n  }); // ============================== State ===============================\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      measuring = _useState2[0],\n      setMeasuring = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      measureText = _useState4[0],\n      setMeasureText = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      measurePrefix = _useState6[0],\n      setMeasurePrefix = _useState6[1];\n\n  var _useState7 = useState(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      measureLocation = _useState8[0],\n      setMeasureLocation = _useState8[1];\n\n  var _useState9 = useState(0),\n      _useState10 = _slicedToArray(_useState9, 2),\n      activeIndex = _useState10[0],\n      setActiveIndex = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      isFocus = _useState12[0],\n      setIsFocus = _useState12[1]; // ============================== Value ===============================\n\n\n  var _useMergedState = useMergedState('', {\n    defaultValue: defaultValue,\n    value: value\n  }),\n      _useMergedState2 = _slicedToArray(_useMergedState, 2),\n      mergedValue = _useMergedState2[0],\n      setMergedValue = _useMergedState2[1]; // =============================== Open ===============================\n\n\n  useEffect(function () {\n    // Sync measure div top with textarea for rc-trigger usage\n    if (measuring && measureRef.current) {\n      measureRef.current.scrollTop = getTextArea().scrollTop;\n    }\n  }, [measuring]);\n\n  var _React$useMemo = React.useMemo(function () {\n    if (open) {\n      if (process.env.NODE_ENV !== 'production') {\n        warning(false, '`open` of Mentions is only used for debug usage. Do not use in you production.');\n      }\n\n      for (var i = 0; i < mergedPrefix.length; i += 1) {\n        var curPrefix = mergedPrefix[i];\n        var index = mergedValue.lastIndexOf(curPrefix);\n\n        if (index >= 0) {\n          return [true, '', curPrefix, index];\n        }\n      }\n    }\n\n    return [measuring, measureText, measurePrefix, measureLocation];\n  }, [open, measuring, mergedPrefix, mergedValue, measureText, measurePrefix, measureLocation]),\n      _React$useMemo2 = _slicedToArray(_React$useMemo, 4),\n      mergedMeasuring = _React$useMemo2[0],\n      mergedMeasureText = _React$useMemo2[1],\n      mergedMeasurePrefix = _React$useMemo2[2],\n      mergedMeasureLocation = _React$useMemo2[3]; // ============================== Option ==============================\n\n\n  var getOptions = React.useCallback(function (targetMeasureText) {\n    var list;\n\n    if (options && options.length > 0) {\n      list = options.map(function (item) {\n        var _item$key;\n\n        return _objectSpread(_objectSpread({}, item), {}, {\n          key: (_item$key = item === null || item === void 0 ? void 0 : item.key) !== null && _item$key !== void 0 ? _item$key : item.value\n        });\n      });\n    } else {\n      list = toArray(children).map(function (_ref) {\n        var optionProps = _ref.props,\n            key = _ref.key;\n        return _objectSpread(_objectSpread({}, optionProps), {}, {\n          label: optionProps.children,\n          key: key || optionProps.value\n        });\n      });\n    }\n\n    return list.filter(function (option) {\n      /** Return all result if `filterOption` is false. */\n      if (filterOption === false) {\n        return true;\n      }\n\n      return filterOption(targetMeasureText, option);\n    });\n  }, [children, options, filterOption]);\n  var mergedOptions = React.useMemo(function () {\n    return getOptions(mergedMeasureText);\n  }, [getOptions, mergedMeasureText]); // ============================= Measure ==============================\n  // Mark that we will reset input selection to target position when user select option\n\n  var onSelectionEffect = useEffectState();\n\n  var startMeasure = function startMeasure(nextMeasureText, nextMeasurePrefix, nextMeasureLocation) {\n    setMeasuring(true);\n    setMeasureText(nextMeasureText);\n    setMeasurePrefix(nextMeasurePrefix);\n    setMeasureLocation(nextMeasureLocation);\n    setActiveIndex(0);\n  };\n\n  var stopMeasure = function stopMeasure(callback) {\n    setMeasuring(false);\n    setMeasureLocation(0);\n    setMeasureText('');\n    onSelectionEffect(callback);\n  }; // ============================== Change ==============================\n\n\n  var triggerChange = function triggerChange(nextValue) {\n    setMergedValue(nextValue);\n    onChange === null || onChange === void 0 ? void 0 : onChange(nextValue);\n  };\n\n  var onInternalChange = function onInternalChange(_ref2) {\n    var nextValue = _ref2.target.value;\n    triggerChange(nextValue);\n  };\n\n  var selectOption = function selectOption(option) {\n    var _getTextArea;\n\n    var _option$value = option.value,\n        mentionValue = _option$value === void 0 ? '' : _option$value;\n\n    var _replaceWithMeasure = replaceWithMeasure(mergedValue, {\n      measureLocation: mergedMeasureLocation,\n      targetText: mentionValue,\n      prefix: mergedMeasurePrefix,\n      selectionStart: (_getTextArea = getTextArea()) === null || _getTextArea === void 0 ? void 0 : _getTextArea.selectionStart,\n      split: split\n    }),\n        text = _replaceWithMeasure.text,\n        selectionLocation = _replaceWithMeasure.selectionLocation;\n\n    triggerChange(text);\n    stopMeasure(function () {\n      // We need restore the selection position\n      setInputSelection(getTextArea(), selectionLocation);\n    });\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(option, mergedMeasurePrefix);\n  }; // ============================= KeyEvent =============================\n  // Check if hit the measure keyword\n\n\n  var onInternalKeyDown = function onInternalKeyDown(event) {\n    var which = event.which;\n    onKeyDown === null || onKeyDown === void 0 ? void 0 : onKeyDown(event); // Skip if not measuring\n\n    if (!mergedMeasuring) {\n      return;\n    }\n\n    if (which === KeyCode.UP || which === KeyCode.DOWN) {\n      // Control arrow function\n      var optionLen = mergedOptions.length;\n      var offset = which === KeyCode.UP ? -1 : 1;\n      var newActiveIndex = (activeIndex + offset + optionLen) % optionLen;\n      setActiveIndex(newActiveIndex);\n      event.preventDefault();\n    } else if (which === KeyCode.ESC) {\n      stopMeasure();\n    } else if (which === KeyCode.ENTER) {\n      // Measure hit\n      event.preventDefault();\n\n      if (!mergedOptions.length) {\n        stopMeasure();\n        return;\n      }\n\n      var _option = mergedOptions[activeIndex];\n      selectOption(_option);\n    }\n  };\n  /**\n   * When to start measure:\n   * 1. When user press `prefix`\n   * 2. When measureText !== prevMeasureText\n   *  - If measure hit\n   *  - If measuring\n   *\n   * When to stop measure:\n   * 1. Selection is out of range\n   * 2. Contains `space`\n   * 3. ESC or select one\n   */\n\n\n  var onInternalKeyUp = function onInternalKeyUp(event) {\n    var key = event.key,\n        which = event.which;\n    var target = event.target;\n    var selectionStartText = getBeforeSelectionText(target);\n\n    var _getLastMeasureIndex = getLastMeasureIndex(selectionStartText, mergedPrefix),\n        measureIndex = _getLastMeasureIndex.location,\n        nextMeasurePrefix = _getLastMeasureIndex.prefix; // If the client implements an onKeyUp handler, call it\n\n\n    onKeyUp === null || onKeyUp === void 0 ? void 0 : onKeyUp(event); // Skip if match the white key list\n\n    if ([KeyCode.ESC, KeyCode.UP, KeyCode.DOWN, KeyCode.ENTER].indexOf(which) !== -1) {\n      return;\n    }\n\n    if (measureIndex !== -1) {\n      var nextMeasureText = selectionStartText.slice(measureIndex + nextMeasurePrefix.length);\n      var validateMeasure = validateSearch(nextMeasureText, split);\n      var matchOption = !!getOptions(nextMeasureText).length;\n\n      if (validateMeasure) {\n        if (key === nextMeasurePrefix || key === 'Shift' || mergedMeasuring || nextMeasureText !== mergedMeasureText && matchOption) {\n          startMeasure(nextMeasureText, nextMeasurePrefix, measureIndex);\n        }\n      } else if (mergedMeasuring) {\n        // Stop if measureText is invalidate\n        stopMeasure();\n      }\n      /**\n       * We will trigger `onSearch` to developer since they may use for async update.\n       * If met `space` means user finished searching.\n       */\n\n\n      if (onSearch && validateMeasure) {\n        onSearch(nextMeasureText, nextMeasurePrefix);\n      }\n    } else if (mergedMeasuring) {\n      stopMeasure();\n    }\n  };\n\n  var onInternalPressEnter = function onInternalPressEnter(event) {\n    if (!mergedMeasuring && onPressEnter) {\n      onPressEnter(event);\n    }\n  }; // ============================ Focus Blur ============================\n\n\n  var focusRef = useRef();\n\n  var onInternalFocus = function onInternalFocus(event) {\n    window.clearTimeout(focusRef.current);\n\n    if (!isFocus && event && onFocus) {\n      onFocus(event);\n    }\n\n    setIsFocus(true);\n  };\n\n  var onInternalBlur = function onInternalBlur(event) {\n    focusRef.current = window.setTimeout(function () {\n      setIsFocus(false);\n      stopMeasure();\n      onBlur === null || onBlur === void 0 ? void 0 : onBlur(event);\n    }, 0);\n  };\n\n  var onDropdownFocus = function onDropdownFocus() {\n    onInternalFocus();\n  };\n\n  var onDropdownBlur = function onDropdownBlur() {\n    onInternalBlur();\n  }; // ============================== Render ==============================\n\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(prefixCls, className),\n    style: style\n  }, /*#__PURE__*/React.createElement(TextArea, _extends({\n    ref: textareaRef,\n    value: mergedValue\n  }, restProps, {\n    rows: rows,\n    onChange: onInternalChange,\n    onKeyDown: onInternalKeyDown,\n    onKeyUp: onInternalKeyUp,\n    onPressEnter: onInternalPressEnter,\n    onFocus: onInternalFocus,\n    onBlur: onInternalBlur\n  })), mergedMeasuring && /*#__PURE__*/React.createElement(\"div\", {\n    ref: measureRef,\n    className: \"\".concat(prefixCls, \"-measure\")\n  }, mergedValue.slice(0, mergedMeasureLocation), /*#__PURE__*/React.createElement(MentionsContext.Provider, {\n    value: {\n      notFoundContent: notFoundContent,\n      activeIndex: activeIndex,\n      setActiveIndex: setActiveIndex,\n      selectOption: selectOption,\n      onFocus: onDropdownFocus,\n      onBlur: onDropdownBlur\n    }\n  }, /*#__PURE__*/React.createElement(KeywordTrigger, {\n    prefixCls: prefixCls,\n    transitionName: transitionName,\n    placement: placement,\n    direction: direction,\n    options: mergedOptions,\n    visible: true,\n    getPopupContainer: getPopupContainer,\n    dropdownClassName: dropdownClassName\n  }, /*#__PURE__*/React.createElement(\"span\", null, mergedMeasurePrefix))), mergedValue.slice(mergedMeasureLocation + mergedMeasurePrefix.length)));\n});\nvar Mentions = /*#__PURE__*/forwardRef(function (_ref3, ref) {\n  var suffix = _ref3.suffix,\n      prefixCls = _ref3.prefixCls,\n      classes = _ref3.classes,\n      value = _ref3.value,\n      rest = _objectWithoutProperties(_ref3, _excluded2);\n\n  return /*#__PURE__*/React.createElement(BaseInput, {\n    inputElement: /*#__PURE__*/React.createElement(InternalMentions, _extends({\n      prefixCls: prefixCls,\n      ref: ref\n    }, rest)),\n    suffix: suffix,\n    prefixCls: prefixCls,\n    classes: classes,\n    value: value\n  });\n});\nMentions.Option = Option;\nexport default Mentions;","map":{"version":3,"names":["_extends","_objectSpread","_slicedToArray","_objectWithoutProperties","_excluded","_excluded2","classNames","BaseInput","TextArea","toArray","useMergedState","KeyCode","warning","React","forwardRef","useEffect","useRef","useState","useEffectState","KeywordTrigger","MentionsContext","Option","filterOption","defaultFilterOption","getBeforeSelectionText","getLastMeasureIndex","replaceWithMeasure","setInputSelection","validateSearch","defaultValidateSearch","InternalMentions","props","ref","_props$prefixCls","prefixCls","className","style","_props$prefix","prefix","_props$split","split","_props$notFoundConten","notFoundContent","value","defaultValue","children","options","open","_props$validateSearch","_props$filterOption","onChange","onKeyDown","onKeyUp","onPressEnter","onSearch","onSelect","onFocus","onBlur","transitionName","placement","direction","getPopupContainer","dropdownClassName","_props$rows","rows","restProps","mergedPrefix","Array","isArray","textareaRef","measureRef","getTextArea","_textareaRef$current","_textareaRef$current$","current","resizableTextArea","textArea","useImperativeHandle","_textareaRef$current4","_textareaRef$current5","focus","_textareaRef$current2","blur","_textareaRef$current3","textarea","_useState","_useState2","measuring","setMeasuring","_useState3","_useState4","measureText","setMeasureText","_useState5","_useState6","measurePrefix","setMeasurePrefix","_useState7","_useState8","measureLocation","setMeasureLocation","_useState9","_useState10","activeIndex","setActiveIndex","_useState11","_useState12","isFocus","setIsFocus","_useMergedState","_useMergedState2","mergedValue","setMergedValue","scrollTop","_React$useMemo","useMemo","process","env","NODE_ENV","i","length","curPrefix","index","lastIndexOf","_React$useMemo2","mergedMeasuring","mergedMeasureText","mergedMeasurePrefix","mergedMeasureLocation","getOptions","useCallback","targetMeasureText","list","map","item","_item$key","key","_ref","optionProps","label","filter","option","mergedOptions","onSelectionEffect","startMeasure","nextMeasureText","nextMeasurePrefix","nextMeasureLocation","stopMeasure","callback","triggerChange","nextValue","onInternalChange","_ref2","target","selectOption","_getTextArea","_option$value","mentionValue","_replaceWithMeasure","targetText","selectionStart","text","selectionLocation","onInternalKeyDown","event","which","UP","DOWN","optionLen","offset","newActiveIndex","preventDefault","ESC","ENTER","_option","onInternalKeyUp","selectionStartText","_getLastMeasureIndex","measureIndex","location","indexOf","slice","validateMeasure","matchOption","onInternalPressEnter","focusRef","onInternalFocus","window","clearTimeout","onInternalBlur","setTimeout","onDropdownFocus","onDropdownBlur","createElement","concat","Provider","visible","Mentions","_ref3","suffix","classes","rest","inputElement"],"sources":["D:/year4sem2/evmos/campaign/node_modules/rc-mentions/es/Mentions.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"prefixCls\", \"className\", \"style\", \"prefix\", \"split\", \"notFoundContent\", \"value\", \"defaultValue\", \"children\", \"options\", \"open\", \"validateSearch\", \"filterOption\", \"onChange\", \"onKeyDown\", \"onKeyUp\", \"onPressEnter\", \"onSearch\", \"onSelect\", \"onFocus\", \"onBlur\", \"transitionName\", \"placement\", \"direction\", \"getPopupContainer\", \"dropdownClassName\", \"rows\"],\n    _excluded2 = [\"suffix\", \"prefixCls\", \"classes\", \"value\"];\nimport classNames from 'classnames';\nimport { BaseInput } from 'rc-input';\nimport TextArea from 'rc-textarea';\nimport toArray from \"rc-util/es/Children/toArray\";\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport warning from \"rc-util/es/warning\";\nimport React, { forwardRef, useEffect, useRef, useState } from 'react';\nimport useEffectState from \"./hooks/useEffectState\";\nimport KeywordTrigger from \"./KeywordTrigger\";\nimport MentionsContext from \"./MentionsContext\";\nimport Option from \"./Option\";\nimport { filterOption as defaultFilterOption, getBeforeSelectionText, getLastMeasureIndex, replaceWithMeasure, setInputSelection, validateSearch as defaultValidateSearch } from \"./util\";\nvar InternalMentions = /*#__PURE__*/forwardRef(function (props, ref) {\n  var _props$prefixCls = props.prefixCls,\n      prefixCls = _props$prefixCls === void 0 ? 'rc-mentions' : _props$prefixCls,\n      className = props.className,\n      style = props.style,\n      _props$prefix = props.prefix,\n      prefix = _props$prefix === void 0 ? '@' : _props$prefix,\n      _props$split = props.split,\n      split = _props$split === void 0 ? ' ' : _props$split,\n      _props$notFoundConten = props.notFoundContent,\n      notFoundContent = _props$notFoundConten === void 0 ? 'Not Found' : _props$notFoundConten,\n      value = props.value,\n      defaultValue = props.defaultValue,\n      children = props.children,\n      options = props.options,\n      open = props.open,\n      _props$validateSearch = props.validateSearch,\n      validateSearch = _props$validateSearch === void 0 ? defaultValidateSearch : _props$validateSearch,\n      _props$filterOption = props.filterOption,\n      filterOption = _props$filterOption === void 0 ? defaultFilterOption : _props$filterOption,\n      onChange = props.onChange,\n      onKeyDown = props.onKeyDown,\n      onKeyUp = props.onKeyUp,\n      onPressEnter = props.onPressEnter,\n      onSearch = props.onSearch,\n      onSelect = props.onSelect,\n      onFocus = props.onFocus,\n      onBlur = props.onBlur,\n      transitionName = props.transitionName,\n      placement = props.placement,\n      direction = props.direction,\n      getPopupContainer = props.getPopupContainer,\n      dropdownClassName = props.dropdownClassName,\n      _props$rows = props.rows,\n      rows = _props$rows === void 0 ? 1 : _props$rows,\n      restProps = _objectWithoutProperties(props, _excluded);\n\n  var mergedPrefix = Array.isArray(prefix) ? prefix : [prefix]; // =============================== Refs ===============================\n\n  var textareaRef = useRef(null);\n  var measureRef = useRef(null);\n\n  var getTextArea = function getTextArea() {\n    var _textareaRef$current, _textareaRef$current$;\n\n    return (_textareaRef$current = textareaRef.current) === null || _textareaRef$current === void 0 ? void 0 : (_textareaRef$current$ = _textareaRef$current.resizableTextArea) === null || _textareaRef$current$ === void 0 ? void 0 : _textareaRef$current$.textArea;\n  };\n\n  React.useImperativeHandle(ref, function () {\n    var _textareaRef$current4, _textareaRef$current5;\n\n    return {\n      focus: function focus() {\n        var _textareaRef$current2;\n\n        return (_textareaRef$current2 = textareaRef.current) === null || _textareaRef$current2 === void 0 ? void 0 : _textareaRef$current2.focus();\n      },\n      blur: function blur() {\n        var _textareaRef$current3;\n\n        return (_textareaRef$current3 = textareaRef.current) === null || _textareaRef$current3 === void 0 ? void 0 : _textareaRef$current3.blur();\n      },\n      textarea: (_textareaRef$current4 = textareaRef.current) === null || _textareaRef$current4 === void 0 ? void 0 : (_textareaRef$current5 = _textareaRef$current4.resizableTextArea) === null || _textareaRef$current5 === void 0 ? void 0 : _textareaRef$current5.textArea\n    };\n  }); // ============================== State ===============================\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      measuring = _useState2[0],\n      setMeasuring = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      measureText = _useState4[0],\n      setMeasureText = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      measurePrefix = _useState6[0],\n      setMeasurePrefix = _useState6[1];\n\n  var _useState7 = useState(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      measureLocation = _useState8[0],\n      setMeasureLocation = _useState8[1];\n\n  var _useState9 = useState(0),\n      _useState10 = _slicedToArray(_useState9, 2),\n      activeIndex = _useState10[0],\n      setActiveIndex = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      isFocus = _useState12[0],\n      setIsFocus = _useState12[1]; // ============================== Value ===============================\n\n\n  var _useMergedState = useMergedState('', {\n    defaultValue: defaultValue,\n    value: value\n  }),\n      _useMergedState2 = _slicedToArray(_useMergedState, 2),\n      mergedValue = _useMergedState2[0],\n      setMergedValue = _useMergedState2[1]; // =============================== Open ===============================\n\n\n  useEffect(function () {\n    // Sync measure div top with textarea for rc-trigger usage\n    if (measuring && measureRef.current) {\n      measureRef.current.scrollTop = getTextArea().scrollTop;\n    }\n  }, [measuring]);\n\n  var _React$useMemo = React.useMemo(function () {\n    if (open) {\n      if (process.env.NODE_ENV !== 'production') {\n        warning(false, '`open` of Mentions is only used for debug usage. Do not use in you production.');\n      }\n\n      for (var i = 0; i < mergedPrefix.length; i += 1) {\n        var curPrefix = mergedPrefix[i];\n        var index = mergedValue.lastIndexOf(curPrefix);\n\n        if (index >= 0) {\n          return [true, '', curPrefix, index];\n        }\n      }\n    }\n\n    return [measuring, measureText, measurePrefix, measureLocation];\n  }, [open, measuring, mergedPrefix, mergedValue, measureText, measurePrefix, measureLocation]),\n      _React$useMemo2 = _slicedToArray(_React$useMemo, 4),\n      mergedMeasuring = _React$useMemo2[0],\n      mergedMeasureText = _React$useMemo2[1],\n      mergedMeasurePrefix = _React$useMemo2[2],\n      mergedMeasureLocation = _React$useMemo2[3]; // ============================== Option ==============================\n\n\n  var getOptions = React.useCallback(function (targetMeasureText) {\n    var list;\n\n    if (options && options.length > 0) {\n      list = options.map(function (item) {\n        var _item$key;\n\n        return _objectSpread(_objectSpread({}, item), {}, {\n          key: (_item$key = item === null || item === void 0 ? void 0 : item.key) !== null && _item$key !== void 0 ? _item$key : item.value\n        });\n      });\n    } else {\n      list = toArray(children).map(function (_ref) {\n        var optionProps = _ref.props,\n            key = _ref.key;\n        return _objectSpread(_objectSpread({}, optionProps), {}, {\n          label: optionProps.children,\n          key: key || optionProps.value\n        });\n      });\n    }\n\n    return list.filter(function (option) {\n      /** Return all result if `filterOption` is false. */\n      if (filterOption === false) {\n        return true;\n      }\n\n      return filterOption(targetMeasureText, option);\n    });\n  }, [children, options, filterOption]);\n  var mergedOptions = React.useMemo(function () {\n    return getOptions(mergedMeasureText);\n  }, [getOptions, mergedMeasureText]); // ============================= Measure ==============================\n  // Mark that we will reset input selection to target position when user select option\n\n  var onSelectionEffect = useEffectState();\n\n  var startMeasure = function startMeasure(nextMeasureText, nextMeasurePrefix, nextMeasureLocation) {\n    setMeasuring(true);\n    setMeasureText(nextMeasureText);\n    setMeasurePrefix(nextMeasurePrefix);\n    setMeasureLocation(nextMeasureLocation);\n    setActiveIndex(0);\n  };\n\n  var stopMeasure = function stopMeasure(callback) {\n    setMeasuring(false);\n    setMeasureLocation(0);\n    setMeasureText('');\n    onSelectionEffect(callback);\n  }; // ============================== Change ==============================\n\n\n  var triggerChange = function triggerChange(nextValue) {\n    setMergedValue(nextValue);\n    onChange === null || onChange === void 0 ? void 0 : onChange(nextValue);\n  };\n\n  var onInternalChange = function onInternalChange(_ref2) {\n    var nextValue = _ref2.target.value;\n    triggerChange(nextValue);\n  };\n\n  var selectOption = function selectOption(option) {\n    var _getTextArea;\n\n    var _option$value = option.value,\n        mentionValue = _option$value === void 0 ? '' : _option$value;\n\n    var _replaceWithMeasure = replaceWithMeasure(mergedValue, {\n      measureLocation: mergedMeasureLocation,\n      targetText: mentionValue,\n      prefix: mergedMeasurePrefix,\n      selectionStart: (_getTextArea = getTextArea()) === null || _getTextArea === void 0 ? void 0 : _getTextArea.selectionStart,\n      split: split\n    }),\n        text = _replaceWithMeasure.text,\n        selectionLocation = _replaceWithMeasure.selectionLocation;\n\n    triggerChange(text);\n    stopMeasure(function () {\n      // We need restore the selection position\n      setInputSelection(getTextArea(), selectionLocation);\n    });\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(option, mergedMeasurePrefix);\n  }; // ============================= KeyEvent =============================\n  // Check if hit the measure keyword\n\n\n  var onInternalKeyDown = function onInternalKeyDown(event) {\n    var which = event.which;\n    onKeyDown === null || onKeyDown === void 0 ? void 0 : onKeyDown(event); // Skip if not measuring\n\n    if (!mergedMeasuring) {\n      return;\n    }\n\n    if (which === KeyCode.UP || which === KeyCode.DOWN) {\n      // Control arrow function\n      var optionLen = mergedOptions.length;\n      var offset = which === KeyCode.UP ? -1 : 1;\n      var newActiveIndex = (activeIndex + offset + optionLen) % optionLen;\n      setActiveIndex(newActiveIndex);\n      event.preventDefault();\n    } else if (which === KeyCode.ESC) {\n      stopMeasure();\n    } else if (which === KeyCode.ENTER) {\n      // Measure hit\n      event.preventDefault();\n\n      if (!mergedOptions.length) {\n        stopMeasure();\n        return;\n      }\n\n      var _option = mergedOptions[activeIndex];\n      selectOption(_option);\n    }\n  };\n  /**\n   * When to start measure:\n   * 1. When user press `prefix`\n   * 2. When measureText !== prevMeasureText\n   *  - If measure hit\n   *  - If measuring\n   *\n   * When to stop measure:\n   * 1. Selection is out of range\n   * 2. Contains `space`\n   * 3. ESC or select one\n   */\n\n\n  var onInternalKeyUp = function onInternalKeyUp(event) {\n    var key = event.key,\n        which = event.which;\n    var target = event.target;\n    var selectionStartText = getBeforeSelectionText(target);\n\n    var _getLastMeasureIndex = getLastMeasureIndex(selectionStartText, mergedPrefix),\n        measureIndex = _getLastMeasureIndex.location,\n        nextMeasurePrefix = _getLastMeasureIndex.prefix; // If the client implements an onKeyUp handler, call it\n\n\n    onKeyUp === null || onKeyUp === void 0 ? void 0 : onKeyUp(event); // Skip if match the white key list\n\n    if ([KeyCode.ESC, KeyCode.UP, KeyCode.DOWN, KeyCode.ENTER].indexOf(which) !== -1) {\n      return;\n    }\n\n    if (measureIndex !== -1) {\n      var nextMeasureText = selectionStartText.slice(measureIndex + nextMeasurePrefix.length);\n      var validateMeasure = validateSearch(nextMeasureText, split);\n      var matchOption = !!getOptions(nextMeasureText).length;\n\n      if (validateMeasure) {\n        if (key === nextMeasurePrefix || key === 'Shift' || mergedMeasuring || nextMeasureText !== mergedMeasureText && matchOption) {\n          startMeasure(nextMeasureText, nextMeasurePrefix, measureIndex);\n        }\n      } else if (mergedMeasuring) {\n        // Stop if measureText is invalidate\n        stopMeasure();\n      }\n      /**\n       * We will trigger `onSearch` to developer since they may use for async update.\n       * If met `space` means user finished searching.\n       */\n\n\n      if (onSearch && validateMeasure) {\n        onSearch(nextMeasureText, nextMeasurePrefix);\n      }\n    } else if (mergedMeasuring) {\n      stopMeasure();\n    }\n  };\n\n  var onInternalPressEnter = function onInternalPressEnter(event) {\n    if (!mergedMeasuring && onPressEnter) {\n      onPressEnter(event);\n    }\n  }; // ============================ Focus Blur ============================\n\n\n  var focusRef = useRef();\n\n  var onInternalFocus = function onInternalFocus(event) {\n    window.clearTimeout(focusRef.current);\n\n    if (!isFocus && event && onFocus) {\n      onFocus(event);\n    }\n\n    setIsFocus(true);\n  };\n\n  var onInternalBlur = function onInternalBlur(event) {\n    focusRef.current = window.setTimeout(function () {\n      setIsFocus(false);\n      stopMeasure();\n      onBlur === null || onBlur === void 0 ? void 0 : onBlur(event);\n    }, 0);\n  };\n\n  var onDropdownFocus = function onDropdownFocus() {\n    onInternalFocus();\n  };\n\n  var onDropdownBlur = function onDropdownBlur() {\n    onInternalBlur();\n  }; // ============================== Render ==============================\n\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(prefixCls, className),\n    style: style\n  }, /*#__PURE__*/React.createElement(TextArea, _extends({\n    ref: textareaRef,\n    value: mergedValue\n  }, restProps, {\n    rows: rows,\n    onChange: onInternalChange,\n    onKeyDown: onInternalKeyDown,\n    onKeyUp: onInternalKeyUp,\n    onPressEnter: onInternalPressEnter,\n    onFocus: onInternalFocus,\n    onBlur: onInternalBlur\n  })), mergedMeasuring && /*#__PURE__*/React.createElement(\"div\", {\n    ref: measureRef,\n    className: \"\".concat(prefixCls, \"-measure\")\n  }, mergedValue.slice(0, mergedMeasureLocation), /*#__PURE__*/React.createElement(MentionsContext.Provider, {\n    value: {\n      notFoundContent: notFoundContent,\n      activeIndex: activeIndex,\n      setActiveIndex: setActiveIndex,\n      selectOption: selectOption,\n      onFocus: onDropdownFocus,\n      onBlur: onDropdownBlur\n    }\n  }, /*#__PURE__*/React.createElement(KeywordTrigger, {\n    prefixCls: prefixCls,\n    transitionName: transitionName,\n    placement: placement,\n    direction: direction,\n    options: mergedOptions,\n    visible: true,\n    getPopupContainer: getPopupContainer,\n    dropdownClassName: dropdownClassName\n  }, /*#__PURE__*/React.createElement(\"span\", null, mergedMeasurePrefix))), mergedValue.slice(mergedMeasureLocation + mergedMeasurePrefix.length)));\n});\nvar Mentions = /*#__PURE__*/forwardRef(function (_ref3, ref) {\n  var suffix = _ref3.suffix,\n      prefixCls = _ref3.prefixCls,\n      classes = _ref3.classes,\n      value = _ref3.value,\n      rest = _objectWithoutProperties(_ref3, _excluded2);\n\n  return /*#__PURE__*/React.createElement(BaseInput, {\n    inputElement: /*#__PURE__*/React.createElement(InternalMentions, _extends({\n      prefixCls: prefixCls,\n      ref: ref\n    }, rest)),\n    suffix: suffix,\n    prefixCls: prefixCls,\n    classes: classes,\n    value: value\n  });\n});\nMentions.Option = Option;\nexport default Mentions;"],"mappings":"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"},"metadata":{},"sourceType":"module"}